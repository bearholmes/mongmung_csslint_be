!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="dist/public/",__webpack_require__(__webpack_require__.s=13)}([function(module,exports){module.exports=require("express")},function(module,exports){module.exports=require("cluster")},function(module,exports){module.exports=require("diff")},function(module,exports){module.exports=require("diff2html")},function(module,exports){module.exports=require("os")},function(module,exports){module.exports=require("compression")},function(module,exports){module.exports=require("serve-favicon")},function(module,exports){module.exports=require("morgan")},function(module,exports){module.exports=require("stylelint")},function(module,exports){module.exports=require("posthtml")},function(module,exports){module.exports=require("posthtml-attrs-sorter")},function(module,exports){module.exports=require("http")},function(module,exports){module.exports=require("debug")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var external_express_=__webpack_require__(0),external_express_default=__webpack_require__.n(external_express_),external_cluster_=__webpack_require__(1),external_cluster_default=__webpack_require__.n(external_cluster_),external_os_=__webpack_require__(4),external_os_default=__webpack_require__.n(external_os_),external_compression_=__webpack_require__(5),external_compression_default=__webpack_require__.n(external_compression_),external_serve_favicon_=__webpack_require__(6),external_serve_favicon_default=__webpack_require__.n(external_serve_favicon_),external_morgan_=__webpack_require__(7),external_morgan_default=__webpack_require__.n(external_morgan_),external_stylelint_=__webpack_require__(8),external_stylelint_default=__webpack_require__.n(external_stylelint_),external_posthtml_=__webpack_require__(9),external_posthtml_default=__webpack_require__.n(external_posthtml_),external_posthtml_attrs_sorter_=__webpack_require__(10),external_posthtml_attrs_sorter_default=__webpack_require__.n(external_posthtml_attrs_sorter_),external_diff_=__webpack_require__(2),external_diff2html_=__webpack_require__(3);const router=external_express_default.a.Router();router.get("/",(req,res)=>{res.set("Content-Type","text/plain"),res.send("Hello. welcome to Stylelint. production")}),router.post("/lint",(function(req,res,next){console.log("start"),res.set("Content-Type","application/json");const config=req.body.config||"";config||res.status(500).json({message:"Could not parse stylelint config"});const opts={code:req.body.code,config:config,syntax:req.body.syntax,fix:"true"};external_stylelint_default.a.lint(opts).then(response=>{if(console.log("lint"),"html"===req.body.syntax)external_posthtml_default()().use(external_posthtml_attrs_sorter_default()({order:["rel","tpye","href","src","width","height","target","id","name","class","style","title","alt","placeholder","role","aria-.+","data-.+","$unknown$"]})).process(response.output,{lowerCaseTags:!0,lowerCaseAttributeNames:!0,closingSingleTag:"slash"}).then(result=>{console.log("diff",result.length);const diffHtmlResult=Object(external_diff_.createPatch)("",opts.code,result.html,"","");let diffHtml="";diffHtmlResult.length>88&&(console.log("pretty"),diffHtml=(diffHtml=external_diff2html_.Diff2Html.getPrettyHtml(diffHtmlResult,{inputFormat:"diff",showFiles:!1,matching:"lines",outputFormat:"side-by-side"})).replace('<span class="d2h-tag d2h-changed d2h-changed-tag">CHANGED</span></span>','<span class="d2h-tag d2h-changed d2h-changed-tag">비교</span></span>')),console.log("end"),res.status(200).json({warnings:response.results[0].warnings,output:result.html,diff:diffHtml})});else{console.log("diff",response.output.length);const diffCssResult=Object(external_diff_.createPatch)("",opts.code,response.output,"","");let diffHtml="";diffCssResult.length>88&&(console.log("pretty"),diffHtml=external_diff2html_.Diff2Html.getPrettyHtml(diffCssResult,{inputFormat:"diff",showFiles:!1,matching:"lines",outputFormat:"side-by-side"})),diffHtml=diffHtml.replace('<span class="d2h-tag d2h-changed d2h-changed-tag">CHANGED</span></span>','<span class="d2h-tag d2h-changed d2h-changed-tag">비교</span></span>'),console.log("end"),res.status(200).json({warnings:response.results[0].warnings,output:response.output,diff:diffHtml})}}).catch(err=>{console.log("err :::"+err),res.status(500).json({message:"lint failed"})})}));var route=router,external_http_=__webpack_require__(11),external_debug_=__webpack_require__(12),external_debug_default=__webpack_require__.n(external_debug_);if(external_cluster_default.a.isMaster){var numWorkers=external_os_default.a.cpus().length;console.log("Master cluster setting up "+numWorkers+" workers...");for(var i=0;i<numWorkers;i++)external_cluster_default.a.fork();external_cluster_default.a.on("online",(function(worker){console.log("Worker "+worker.process.pid+" is online")})),external_cluster_default.a.on("exit",(function(worker,code,signal){console.log("Worker "+worker.process.pid+" died with code: "+code+", and signal: "+signal),console.log("Starting a new worker"),external_cluster_default.a.fork()}))}else{let app=external_express_default()();app.use((req,res,next)=>{res.header("Access-Control-Allow-Origin","*"),res.header("Access-Control-Allow-Methods","GET, HEAD, OPTIONS, POST, PUT"),res.header("Access-Control-Allow-Headers","X-Requested-With, Content-Type, Authorization"),res.header("Access-Control-Allow-Credentials","true"),"OPTIONS"===req.method?res.sendStatus(200):next()}),app.use(external_morgan_default()("common")),app.use(external_compression_default()()),app.use(Object(external_express_.json)({limit:"10mb"})),app.use(Object(external_express_.urlencoded)({extended:!1})),app.use("/",route);const debug=external_debug_default()("myapp:server");app.use(external_serve_favicon_default()("./static/favicon.ico"));const port=function(val){const port=parseInt(val,10);return isNaN(port)?val:port>=0&&port}(process.env.PORT||"5000");app.set("port",port);let server=Object(external_http_.createServer)(app);const env="production";function onError(error){if("listen"!==error.syscall)throw error;const bind="string"==typeof port?"Pipe "+port:"Port "+port;switch(error.code){case"EACCES":console.error(bind+" requires elevated privileges"),process.exit(1);case"EADDRINUSE":console.error(bind+" is already in use"),process.exit(1);default:throw error}}function onListening(){const addr=server.address(),bind="string"==typeof addr?"pipe "+addr:"port "+addr.port;debug("Listening on "+bind)}server.listen(port,()=>{console.log(`Express is running on port ${port} / ${env}`)}),server.on("error",onError),server.on("listening",onListening)}}]);